<html>
  <head>
    <script src="http://d3js.org/d3.v3.min.js"></script>
  <head>
  <body>
    <div id="viz"></div>
    <script>

var monthNames = [
    'Jan', 'Feb', 'Mar', 'Apr',
    'May', 'Jun', 'Jul', 'Aug',
    'Sep', 'Oct', 'Nov', 'Dec'
];

var format = d3.time.format('%Y-%b');

var w = 500,
    h = 400,
    m = 100;

var x = d3.time.scale()
    .range([0,w]);

var y = d3.scale.linear()
    .range([h,0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient('bottom');

var yAxis = d3.svg.axis()
    .scale(y)
    .orient('left');

var svg = d3.select('#viz')
    .append('svg')
    .attr('width', w+2*m)
    .attr('height', h+2*m)
    .append('g')
    .attr('transform','translate('+m+','+m+')');

function month(d) { return d.month; }
function value(d) { return d.value; }

d3.csv("data/CEU0000000001.csv", function(err, years) {

    var months = [];

    years.forEach(function(year) {
        monthNames.forEach(function(month) {
            if ( year[month] === ' ' ) return;
            months.push({
                month: format.parse(year.Year+'-'+month),
                value: parseInt(year[month])
            });
        });
    });

    x.domain(d3.extent(months, month));
    y.domain(d3.extent(months, value));

    svg.append('g')
        .attr('class', 'x axis')
        .attr('transform', 'translate(0,'+h+')')
        .call(xAxis);

    svg.append('g')
        .attr('class', 'y axis')
        .call(yAxis);

    svg.selectAll('.dot')
        .data(months)
      .enter().append('circle')
        .attr('class', 'dot')
        .attr('r', 4)
        .attr('cx', function(d) { return x( month(d) ); })
        .attr('cy', function(d) { return y( value(d) ); });

});

    </script>
  </body>
</html>
